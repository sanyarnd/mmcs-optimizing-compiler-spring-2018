# Название задачи: 

Структура для работы с трёхадресным кодом

### Постановка задачи: 

Реaлизовать структуру для работы с трёхадресным кодом.

### Зависимости задач в графе задач

Зависит от:
* AST

От задачи зависит:
* Генерация трехадресного кода по синтаксическому дереву
* Базовые блоки

### Теоретическая часть задачи

Трехадресный код - это последовательность операторов вида:

* `x = op z`
* `goto L`
* `if x goto L`
* `nop`
* `x = y op z`
* `x = y`
* `print`

где `x`, `y`, `z` - имена, константы или сгенерированные компилятором временные объекты, `L` - метка, `op` - бинарный оператор, `print`, `goto` - соответствующие операторы языка.

Трехадресный код представляет собой линеаризованное представление синтаксического дерева или ориентированного ациклического графа, в котором явные имена соответствуют внутренним узлам графа. 

#### Практическая часть задачи (реализация)

Трехадресный код представляет собой иерархию классов:
- Базовый класс строки кода, характеризуется уникальным идентификатором
  - Пустая строка (nop, возможно помеченный)
  - Оператор печати
  - Оператор присваивания (основной оператор кода, может быть унарным и бинарным)
  - Оператор безусловного перехода (goto label)
    - Оператор условного перехода (if cond goto label)

Также присутсвует набор служебных классов:
* Выражения-операнды 
  - Константы (целые числа)
  - Переменные (именованные и не очень)
* Декоратор идентификатора - позволяет представить идентификатор(метку) строки в удобном для пользователя виде на печати или при отладке

### Пример 1

``` C#
a = 3;
b = 1 + 1;
c = a * b;
print(c);
```

Вывод:
```
l1 : t0 = 3
l0 : a = 3
l4 : t2 = 1
l5 : t3 = 1
l3 : t1 = 2
l2 : b = 2
l8 : t5 = 3
l9 : t6 = 2
l7 : t4 = 6
l6 : c = 6
l11 : t7 = 6
l10 : print t7 
```

### Пример 2

``` C#
for(i = 0, 3, 1 + 1)
    print(1, 2, 3);
```

Вывод:
```
l0 : t0 = 0
l2 : t2 = 1
l3 : t3 = 1
l1 : t1 = 2
l4 : nop
l6 : t4 = t1 >= 0
l7 : if t4 goto l12
l9 : t6 = 3
l8 : t5 = t0 <= 3
l10 : if t5 goto l30
l11 : goto l17
l12 : nop
l15 : t8 = 3
l14 : t7 = t0 >= 3
l16 : if t7 goto l30
l17 : nop
l20 : t9 = 1
l19 : print t9
l22 : t10 = 2
l21 : print t10
l24 : t11 = 3
l23 : print t11 
l26 : t13 = 1
l27 : t14 = 1
l25 : t12 = 2
l28 : t0 = t0 + 2
l29 : goto l4
```